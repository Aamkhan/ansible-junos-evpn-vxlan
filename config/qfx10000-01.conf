
system {
    host-name qfx10000-01;
    time-zone America/Los_Angeles;
    root-authentication {
        encrypted-password "$1$ZUlES4dp$OUwWo1g7cLoV/aMWpHUnC/";
    }
    name-server {
        192.168.5.68;
        192.168.60.131;
    }
    services {
        netconf {
            ssh;
        }
        ssh;
    }
    login {
        message "This is the property of Example Corp. Do not login without express permission. ";
    }
    syslog  {
        user * {
            any emergency;
        }
        file messages {
            any notice;
        }
        file cli-commands {
            interactive-commands any;
            explicit-priority;
        }
        time-format millisecond;
    }
    ntp {
        server 172.17.28.5;
    }
}
interfaces {
    em0 {
        unit 0 {
            family inet {
              address 10.92.71.9/23;
            }
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 1.1.1.1/32
            }
        }
    }
}
snmp {
    location "Site 1";
    contact "John Doe";
    community public {
        authorization read-only;
    }
}
routing-options {
    static {
        route 0.0.0.0/0 next-hop 10.92.71.254;
    }
}

protocols {
    lldp {
        interface all;
    }
}

<<<<<<< HEAD:config/qfx10000-01.conf
=======
protocols {
    bgp {
        group overlay-evpn {
            type internal;
            family evpn signaling;
            local-as 62000;
            local-address 1.1.1.1;
            multipath;
            neighbor 1.1.2.2;
            neighbor 1.1.1.2;
            neighbor 1.1.2.1;
        }
        bfd-liveness-detection {
            minimum-interval 350;
            multiplier 3;
            session-mode automatic;
        }
    }
}

>>>>>>> 191b53f25fc3a7357efa0175f991b3f0b3d50fd8:config/mx480-01.conf
routing-options {
    router-id 1.1.1.1;
    forwarding-table {
        ecmp-fast-reroute;
    }
}

routing-instances {
<<<<<<< HEAD:config/qfx10000-01.conf
    VRF_RED {
=======
    VRF_TENANT_10 {
>>>>>>> 191b53f25fc3a7357efa0175f991b3f0b3d50fd8:config/mx480-01.conf
        instance-type vrf;
        interface lo0.1;
        interface irb.100;
        interface irb.101;
        interface irb.102;
        interface irb.103;
        interface irb.104;
        route-distinguisher 1.1.1.1:1001;
        vrf-target target:10:1;
    }
    VRF_BLUE {
        instance-type vrf;
        interface lo0.2;
        interface irb.105;
        interface irb.106;
        interface irb.107;
        interface irb.108;
<<<<<<< HEAD:config/qfx10000-01.conf
        route-distinguisher 1.1.1.1:1002;
        vrf-target target:10:1;
    }
}


interfaces {
    lo0 {
        unit 1 {
            family inet {
                address 1.2.1.1/32;
=======
        route-distinguisher 1.1.1.1:10;
        vrf-target target:10:10;
    }

    VS_TENANT_10 {
        instance-type virtual-switch;
        vtep-source-interface lo0.0;
        route-distinguisher 1.1.1.1:10;
        vrf-import VRF_TENANT_10_VS_IN;
        vrf-target target:11:10;
        protocols {
            evpn {
                encapsulation vxlan;
                extended-vni-list [  1000  1001  1002  1003  1004  1005  1006  1007  1008  ];
                multicast-mode ingress-replication;
            }
        }
        bridge-domains {
            bd1000 {
                routing-interface irb.100;
                vlan-id  100;
                vxlan {
                    vni 1000;
                    ingress-node-replication;
                }
            }
            bd1001 {
                routing-interface irb.101;
                vlan-id  101;
                vxlan {
                    vni 1001;
                    ingress-node-replication;
                }
            }
            bd1002 {
                routing-interface irb.102;
                vlan-id  102;
                vxlan {
                    vni 1002;
                    ingress-node-replication;
                }
            }
            bd1003 {
                routing-interface irb.103;
                vlan-id  103;
                vxlan {
                    vni 1003;
                    ingress-node-replication;
                }
            }
            bd1004 {
                routing-interface irb.104;
                vlan-id  104;
                vxlan {
                    vni 1004;
                    ingress-node-replication;
                }
            }
            bd1005 {
                routing-interface irb.105;
                vlan-id  105;
                vxlan {
                    vni 1005;
                    ingress-node-replication;
                }
            }
            bd1006 {
                routing-interface irb.106;
                vlan-id  106;
                vxlan {
                    vni 1006;
                    ingress-node-replication;
                }
            }
            bd1007 {
                routing-interface irb.107;
                vlan-id  107;
                vxlan {
                    vni 1007;
                    ingress-node-replication;
                }
>>>>>>> 191b53f25fc3a7357efa0175f991b3f0b3d50fd8:config/mx480-01.conf
            }
        }
    }
    lo0 {
        unit 2 {
            family inet {
                address 1.3.1.1/32;
            }
        }
    }
<<<<<<< HEAD:config/qfx10000-01.conf
=======
}
interfaces {
>>>>>>> 191b53f25fc3a7357efa0175f991b3f0b3d50fd8:config/mx480-01.conf
    irb {
        unit 100 {
            description " * TENANT 10 - vlan 100 - vni 1000 "
            family inet {
                address 10.1.100.2/24 {
                    virtual-gateway-address 10.1.100.1;
                }
            }
        }
        unit 101 {
            description " * TENANT 10 - vlan 101 - vni 1001 "
            family inet {
                address 10.1.101.2/24 {
                    virtual-gateway-address 10.1.101.1;
                }
            }
        }
        unit 102 {
            description " * TENANT 10 - vlan 102 - vni 1002 "
            family inet {
                address 10.1.102.2/24 {
                    virtual-gateway-address 10.1.102.1;
                }
            }
        }
        unit 103 {
            description " * TENANT 10 - vlan 103 - vni 1003 "
            family inet {
                address 10.1.103.2/24 {
                    virtual-gateway-address 10.1.103.1;
                }
            }
        }
        unit 104 {
            description " * TENANT 10 - vlan 104 - vni 1004 "
            family inet {
                address 10.1.104.2/24 {
                    virtual-gateway-address 10.1.104.1;
                }
            }
        }
        unit 105 {
            description " * TENANT 10 - vlan 105 - vni 1005 "
            family inet {
                address 10.1.105.2/24 {
                    virtual-gateway-address 10.1.105.1;
                }
            }
        }
        unit 106 {
            description " * TENANT 10 - vlan 106 - vni 1006 "
            family inet {
                address 10.1.106.2/24 {
                    virtual-gateway-address 10.1.106.1;
                }
            }
        }
        unit 107 {
            description " * TENANT 10 - vlan 107 - vni 1007 "
            family inet {
                address 10.1.107.2/24 {
                    virtual-gateway-address 10.1.107.1;
                }
            }
        }
        unit 108 {
            description " * TENANT 10 - vlan 108 - vni 1008 "
            family inet {
                address 10.1.108.2/24 {
                    virtual-gateway-address 10.1.108.1;
                }
            }
        }
    }
}
<<<<<<< HEAD:config/qfx10000-01.conf

protocols {
    bgp {
        group overlay {
            type internal;
			cluster 2.2.2.2
            family evpn {
                signaling;
            }
            local-address 1.1.1.1;
            local-as 62000;
            multipath;
            neighbor 1.1.1.2;
            neighbor 1.1.10.1;
            neighbor 1.1.10.2;
            neighbor 1.1.10.3;
            neighbor 1.1.10.4;
        }
    }
    evpn {
        encapsulation vxlan;
        extended-vni-list [  1000  1001  1002  1003  1004  1005  1006  1007  1008  ];
        multicast-mode ingress-replication;
        vni-options {
            vni 1000 {
                vrf-target export target:1:1000;
            }
            vni 1001 {
                vrf-target export target:1:1001;
            }
            vni 1002 {
                vrf-target export target:1:1002;
            }
            vni 1003 {
                vrf-target export target:1:1003;
            }
            vni 1004 {
                vrf-target export target:1:1004;
            }
            vni 1005 {
                vrf-target export target:1:1005;
            }
            vni 1006 {
                vrf-target export target:1:1006;
            }
            vni 1007 {
                vrf-target export target:1:1007;
            }
            vni 1008 {
                vrf-target export target:1:1008;
            }
        }
    }
}

switch-options {
    vtep-source-interface lo0.0;
    vrf-import LEAF-IN;
    vrf-target target:9999:9999;
    route-distinguisher 1.1.1.1:1;
}

policy-options {
     policy-statement LEAF-IN {
        term a1000 {
=======
policy-options {
    policy-statement VRF_TENANT_10_VS_IN {
        term import_leaf_esi {
            from community comm-leaf_esi;
            then accept;
        }
        term import_vni1000 {
>>>>>>> 191b53f25fc3a7357efa0175f991b3f0b3d50fd8:config/mx480-01.conf
            from community com1000;
            then accept;
        }
        term import_vni1001 {
            from community com1001;
            then accept;
        }
        term import_vni1002 {
            from community com1002;
            then accept;
        }
        term import_vni1003 {
            from community com1003;
            then accept;
        }
        term import_vni1004 {
            from community com1004;
            then accept;
        }
        term import_vni1005 {
            from community com1005;
            then accept;
        }
        term import_vni1006 {
            from community com1006;
            then accept;
        }
        term import_vni1007 {
            from community com1007;
            then accept;
        }
        term import_vni1008 {
            from community com1008;
            then accept;
        }
<<<<<<< HEAD:config/qfx10000-01.conf
   	    term switch_options {
            from community switch_options_comm;
            then accept;
        }
        term zzz {
=======
        term default {
>>>>>>> 191b53f25fc3a7357efa0175f991b3f0b3d50fd8:config/mx480-01.conf
            then reject;
        }
    }
    community switch_options_comm members target:9999:9999;
    community com1000 members target:1:1000;
    community com1001 members target:1:1001;
    community com1002 members target:1:1002;
    community com1003 members target:1:1003;
    community com1004 members target:1:1004;
    community com1005 members target:1:1005;
    community com1006 members target:1:1006;
    community com1007 members target:1:1007;
    community com1008 members target:1:1008;
}


vlans {
    bd1000 {
        vlan-id 100;
        l3-interface irb.100;
        vxlan {
            vni 1000;
            ingress-node-replication;
        }
    }
    bd1001 {
        vlan-id 101;
        l3-interface irb.101;
        vxlan {
            vni 1001;
            ingress-node-replication;
        }
    }
    bd1002 {
        vlan-id 102;
        l3-interface irb.102;
        vxlan {
            vni 1002;
            ingress-node-replication;
        }
    }
    bd1003 {
        vlan-id 103;
        l3-interface irb.103;
        vxlan {
            vni 1003;
            ingress-node-replication;
        }
    }
    bd1004 {
        vlan-id 104;
        l3-interface irb.104;
        vxlan {
            vni 1004;
            ingress-node-replication;
        }
    }
    bd1005 {
        vlan-id 105;
        l3-interface irb.105;
        vxlan {
            vni 1005;
            ingress-node-replication;
        }
    }
    bd1006 {
        vlan-id 106;
        l3-interface irb.106;
        vxlan {
            vni 1006;
            ingress-node-replication;
        }
    }
    bd1007 {
        vlan-id 107;
        l3-interface irb.107;
        vxlan {
            vni 1007;
            ingress-node-replication;
        }
    }
    bd1008 {
        vlan-id 108;
        l3-interface irb.108;
        vxlan {
            vni 1008;
            ingress-node-replication;
        }
    }
}
interfaces {
    et-0/0/3 {
        mtu 9192
        unit 0 {
            description "to qfx5100-01-48s";
            family inet {
                mtu 9000;
                address 171.0.0.0/31;
            }
        }
    }
    et-0/0/5 {
        mtu 9192
        unit 0 {
            description "to qfx5100-02-48s";
            family inet {
                mtu 9000;
                address 171.0.0.2/31;
            }
        }
    }
    et-0/0/16 {
        mtu 9192
        unit 0 {
            description "to qfx5100-03-48s";
            family inet {
                mtu 9000;
                address 171.0.0.4/31;
            }
        }
    }
    et-0/0/18 {
        mtu 9192
        unit 0 {
            description "to qfx5100-04-96s";
            family inet {
                mtu 9000;
                address 171.0.0.6/31;
            }
        }
    }
}
protocols {
    bgp {
        log-updown;
        graceful-restart;
        group underlay-ipfabric {
            import bgp-ipclos-in;
            export  bgp-ipclos-out;
            type external;
            mtu-discovery;
            local-as 60001;
            bfd-liveness-detection {
                minimum-interval 350;
                multiplier 3;
                session-mode single-hop;
            }
            multipath multiple-as;
            neighbor 171.0.0.1 {
                peer-as 60010;
            }
            neighbor 171.0.0.3 {
                peer-as 60011;
            }
            neighbor 171.0.0.5 {
                peer-as 60012;
            }
            neighbor 171.0.0.7 {
                peer-as 60013;
            }
        }
    }
}

routing-options {
    router-id 1.1.1.1;
    forwarding-table {
        export pfe-ecmp;
    }
}

policy-options {
    policy-statement pfe-ecmp {
        then {
            load-balance per-packet;
        }
    }
    policy-statement bgp-ipclos-in {
        term loopbacks {
            from {
                route-filter 1.1.0.0/16 orlonger;
            }
            then accept;
        }
        term server-L3-gw {
            from {
                route-filter 192.168.0.0/16 orlonger;
            }
            then accept;
        }
        term reject {
            then reject;
        }
    }
    policy-statement bgp-ipclos-out {
        term loopback {
            from {
                protocol direct;
                route-filter 1.1.1.1/32 orlonger;
            }
            then {
                next-hop self;
                accept;
            }
        }
        term server-L3-gw {
            from {
                protocol direct;
                route-filter 192.168.0.0/16 orlonger;
            }
            then {
                next-hop self;
                accept;
            }
        }
    }
}
<<<<<<< HEAD:config/qfx10000-01.conf
=======
interfaces {
    xe-5/2/2 {
        description "to qfx5100-10";
        mtu 9192
        unit 0 {
            description " * to qfx5100-10 -- xe-0/0/0";
            family inet {
                mtu 9000;
                address 171.0.0.0/31;
            }
        }
    }
    xe-5/2/3 {
        description "to qfx5100-11";
        mtu 9192
        unit 0 {
            description " * to qfx5100-11 -- xe-0/0/1";
            family inet {
                mtu 9000;
                address 171.0.0.2/31;
            }
        }
    }
}
>>>>>>> 191b53f25fc3a7357efa0175f991b3f0b3d50fd8:config/mx480-01.conf
